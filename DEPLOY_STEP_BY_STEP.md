# GitHub Pages + Railway éƒ¨ç½²å®Œæ•´æŒ‡å—

## ğŸ¯ éƒ¨ç½²ç›®æ ‡
- **å‰ç«¯**: GitHub Pages (å…è´¹é™æ€æ‰˜ç®¡)
- **åç«¯**: Railway (å…è´¹UDPä»£ç†æœåŠ¡å™¨)
- **ç»“æœ**: å®Œå…¨å¯ç”¨çš„åœ¨çº¿UDPè°ƒè¯•å·¥å…·

## ğŸ“‹ å‡†å¤‡å·¥ä½œ

### 1. ç¡®ä¿æ–‡ä»¶å®Œæ•´
ç¡®è®¤æ‚¨çš„é¡¹ç›®åŒ…å«ä»¥ä¸‹æ–‡ä»¶ï¼š
```
â”œâ”€â”€ index.html
â”œâ”€â”€ css/
â”œâ”€â”€ js/
â”œâ”€â”€ imgs/
â”œâ”€â”€ udp-proxy-server.js
â”œâ”€â”€ package.json
â”œâ”€â”€ railway.json
â”œâ”€â”€ Procfile
â”œâ”€â”€ .github/workflows/deploy.yml
â””â”€â”€ README.md
```

### 2. ä¿®æ”¹ä»£ç†æœåŠ¡å™¨åœ°å€
ç¼–è¾‘ `js/udp.js` æ–‡ä»¶ï¼Œå°†ç¬¬332è¡Œçš„ä»£ç†åœ°å€æ”¹ä¸ºæ‚¨çš„å®é™…åœ°å€ï¼š
```javascript
// GitHub Pageséƒ¨ç½²
if (hostname.includes('github.io')) {
    // ğŸ”¥ é‡è¦ï¼šè¿™é‡Œéœ€è¦æ›¿æ¢ä¸ºæ‚¨çš„å®é™…Railwayåº”ç”¨åœ°å€
    return 'wss://your-app-name.railway.app';
}
```

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šéƒ¨ç½²åç«¯åˆ°Railway

#### 1.1 æ³¨å†ŒRailwayè´¦å·
1. è®¿é—® [railway.app](https://railway.app)
2. ä½¿ç”¨GitHubè´¦å·ç™»å½•
3. æˆæƒRailwayè®¿é—®æ‚¨çš„ä»“åº“

#### 1.2 åˆ›å»ºæ–°é¡¹ç›®
1. ç‚¹å‡» "New Project"
2. é€‰æ‹© "Deploy from GitHub repo"
3. é€‰æ‹©æ‚¨çš„UDPè°ƒè¯•å·¥å…·ä»“åº“
4. Railwayä¼šè‡ªåŠ¨æ£€æµ‹åˆ°Node.jsé¡¹ç›®

#### 1.3 é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰
```bash
NODE_ENV=production
PORT=8080
```

#### 1.4 è·å–éƒ¨ç½²åœ°å€
éƒ¨ç½²å®Œæˆåï¼ŒRailwayä¼šæä¾›ä¸€ä¸ªåœ°å€ï¼Œç±»ä¼¼ï¼š
```
https://your-app-name.railway.app
```

### ç¬¬äºŒæ­¥ï¼šæ›´æ–°å‰ç«¯é…ç½®

#### 2.1 ä¿®æ”¹ä»£ç†åœ°å€
å°†Railwayæä¾›çš„åœ°å€æ›´æ–°åˆ°ä»£ç ä¸­ï¼š
```javascript
// åœ¨js/udp.jsç¬¬332è¡Œé™„è¿‘
if (hostname.includes('github.io')) {
    return 'wss://your-app-name.railway.app'; // æ›¿æ¢ä¸ºå®é™…åœ°å€
}
```

#### 2.2 æäº¤ä»£ç 
```bash
git add .
git commit -m "Update proxy server URL for production"
git push origin main
```

### ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²å‰ç«¯åˆ°GitHub Pages

#### 3.1 å¯ç”¨GitHub Pages
1. è¿›å…¥GitHubä»“åº“è®¾ç½®
2. æ‰¾åˆ° "Pages" é€‰é¡¹
3. Sourceé€‰æ‹© "GitHub Actions"
4. ä¿å­˜è®¾ç½®

#### 3.2 è§¦å‘éƒ¨ç½²
æ¨é€ä»£ç åï¼ŒGitHub Actionsä¼šè‡ªåŠ¨è¿è¡Œï¼š
```bash
git push origin main
```

#### 3.3 æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
1. åœ¨ä»“åº“çš„ "Actions" æ ‡ç­¾é¡µæŸ¥çœ‹éƒ¨ç½²è¿›åº¦
2. éƒ¨ç½²æˆåŠŸåï¼Œè®¿é—®: `https://your-username.github.io/your-repo-name`

## âœ… éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥å‰ç«¯
è®¿é—®GitHub Pagesåœ°å€ï¼Œç¡®è®¤ï¼š
- [ ] é¡µé¢æ­£å¸¸åŠ è½½
- [ ] UDPé€‰é¡¹å¡å¯è§
- [ ] é…ç½®ç•Œé¢æ­£å¸¸

### 2. æ£€æŸ¥åç«¯
è®¿é—®Railwayåº”ç”¨åœ°å€ï¼Œç¡®è®¤ï¼š
- [ ] æ˜¾ç¤ºæœåŠ¡å™¨çŠ¶æ€é¡µé¢
- [ ] `/status` APIè¿”å›æ­£å¸¸
- [ ] `/health` å¥åº·æ£€æŸ¥æ­£å¸¸

### 3. æµ‹è¯•UDPåŠŸèƒ½
1. åœ¨å‰ç«¯é€‰æ‹©UDPæ¨¡å¼
2. é…ç½®UDPå‚æ•°
3. ç‚¹å‡»è¿æ¥ï¼ŒæŸ¥çœ‹æ—¥å¿—ï¼š
```
æ­£åœ¨é€šè¿‡WebSocketä»£ç†è¿æ¥UDP...
ä»£ç†æœåŠ¡å™¨: wss://your-app-name.railway.app
WebSocketä»£ç†è¿æ¥æˆåŠŸï¼Œæ­£åœ¨å»ºç«‹UDPè¿æ¥...
å·²è¿æ¥åˆ°UDPä»£ç†æœåŠ¡å™¨ (å®¢æˆ·ç«¯ID: xxx)
UDPè¿æ¥æˆåŠŸ: 0.0.0.0:8081
```

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜1: WebSocketè¿æ¥å¤±è´¥
**ç—‡çŠ¶**: æ˜¾ç¤º"WebSocketä»£ç†è¿æ¥é”™è¯¯"
**è§£å†³**:
1. æ£€æŸ¥Railwayåº”ç”¨æ˜¯å¦æ­£å¸¸è¿è¡Œ
2. ç¡®è®¤ä»£ç†åœ°å€æ˜¯å¦æ­£ç¡®ï¼ˆæ³¨æ„wss://å‰ç¼€ï¼‰
3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### é—®é¢˜2: CORSé”™è¯¯
**ç—‡çŠ¶**: æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤ºè·¨åŸŸé”™è¯¯
**è§£å†³**:
1. ç¡®è®¤Railwayåº”ç”¨åŒ…å«CORSé…ç½®
2. æ£€æŸ¥GitHub PagesåŸŸåæ˜¯å¦åœ¨å…è®¸åˆ—è¡¨ä¸­

### é—®é¢˜3: GitHub Actionséƒ¨ç½²å¤±è´¥
**ç—‡çŠ¶**: Actionsæ˜¾ç¤ºçº¢è‰²é”™è¯¯
**è§£å†³**:
1. æ£€æŸ¥ä»“åº“æ˜¯å¦å¯ç”¨äº†PagesåŠŸèƒ½
2. ç¡®è®¤workflowæ–‡ä»¶è¯­æ³•æ­£ç¡®
3. æŸ¥çœ‹Actionsæ—¥å¿—è¯¦ç»†é”™è¯¯ä¿¡æ¯

## ğŸ›ï¸ é«˜çº§é…ç½®

### è‡ªå®šä¹‰åŸŸå
å¦‚æœæ‚¨æœ‰è‡ªå®šä¹‰åŸŸåï¼š

1. **GitHub Pagesè‡ªå®šä¹‰åŸŸå**:
   - åœ¨ä»“åº“è®¾ç½®ä¸­é…ç½®è‡ªå®šä¹‰åŸŸå
   - æ›´æ–°DNSè®°å½•

2. **Railwayè‡ªå®šä¹‰åŸŸå**:
   - åœ¨Railwayé¡¹ç›®è®¾ç½®ä¸­æ·»åŠ è‡ªå®šä¹‰åŸŸå
   - é…ç½®DNS CNAMEè®°å½•

### ç¯å¢ƒå˜é‡é…ç½®
åœ¨Railwayä¸­è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
```bash
# ç”Ÿäº§ç¯å¢ƒæ ‡è¯†
NODE_ENV=production

# å…è®¸çš„æ¥æºï¼ˆå¦‚æœä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼‰
ALLOWED_ORIGINS=https://your-domain.com,https://your-username.github.io

# è¿æ¥é™åˆ¶
MAX_CONNECTIONS=200
```

### ç›‘æ§å’Œæ—¥å¿—
1. **Railwayç›‘æ§**: åœ¨Railwayæ§åˆ¶å°æŸ¥çœ‹åº”ç”¨çŠ¶æ€
2. **GitHub PagesçŠ¶æ€**: åœ¨ä»“åº“Settings > PagesæŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
3. **å®æ—¶æ—¥å¿—**: Railwayæä¾›å®æ—¶æ—¥å¿—æŸ¥çœ‹åŠŸèƒ½

## ğŸ“Š æˆæœ¬åˆ†æ

| æœåŠ¡ | å…è´¹é¢åº¦ | ä»˜è´¹ä»·æ ¼ |
|------|----------|----------|
| GitHub Pages | æ— é™åˆ¶ | å…è´¹ |
| Railway | 500å°æ—¶/æœˆ | $5/æœˆèµ· |
| **æ€»è®¡** | **å…è´¹ä½¿ç”¨** | **$5/æœˆ** |

## ğŸ”„ æ›´æ–°éƒ¨ç½²

### æ›´æ–°å‰ç«¯
```bash
# ä¿®æ”¹ä»£ç å
git add .
git commit -m "Update frontend"
git push origin main
# GitHub Actionsè‡ªåŠ¨éƒ¨ç½²
```

### æ›´æ–°åç«¯
```bash
# ä¿®æ”¹udp-proxy-server.jså
git add .
git commit -m "Update backend"
git push origin main
# Railwayè‡ªåŠ¨é‡æ–°éƒ¨ç½²
```

## ğŸ‰ å®Œæˆï¼

éƒ¨ç½²å®Œæˆåï¼Œæ‚¨å°†æ‹¥æœ‰ï¼š
- âœ… åœ¨çº¿å¯è®¿é—®çš„UDPè°ƒè¯•å·¥å…·
- âœ… å®Œå…¨å…è´¹çš„åŸºç¡€æœåŠ¡
- âœ… è‡ªåŠ¨åŒ–çš„éƒ¨ç½²æµç¨‹
- âœ… å¯æ‰©å±•çš„æ¶æ„è®¾è®¡

ç°åœ¨æ‚¨å¯ä»¥åˆ†äº«GitHub Pagesé“¾æ¥ç»™å…¶ä»–äººä½¿ç”¨æ‚¨çš„UDPè°ƒè¯•å·¥å…·äº†ï¼